(function($){var DEBUG=false;var version="1.0";$.fn.hiddenPosition=function(options){var opts=$.extend({},$.fn.hiddenPosition.defaults,options);return this.each(function(){var $this=$(this);var o=$.metadata?$.extend({},opts,$this.metadata()):opts;position($this,o);});};function position(element,options){var dims=getHiddenDims(element);var ofDims=getHiddenDims($(options.of));var my=getDirections(options.my);var at=getDirections(options.at);var offset=getOffset(options.offset);debugObject("my",my);debugObject("at",at);debugObject("myDims",dims);debugObject("targetDims",ofDims);var coord=getCoordinates($(options.of),ofDims,options);switch(at.h){case"center":coord.left+=ofDims.width/2;break;case"right":coord.left+=ofDims.width;break;default:break;}switch(at.v){case"center":coord.top+=ofDims.height/2;break;case"bottom":coord.top+=ofDims.height;break;default:break;}switch(my.h){case"center":coord.left-=dims.width/2;break;case"right":coord.left-=dims.width;break;default:break;}switch(my.v){case"center":coord.top-=dims.height/2;break;case"bottom":coord.top-=dims.height;break;default:break;}coord.top+=offset.v;coord.left+=offset.h;move(element,coord);}function move(element,coord){element.css("left",coord.left+"px").css("top",coord.top+"px");}function getCoordinates(target,dims,options){var coord={top:dims.offsetTop,left:dims.offsetLeft};if(dims.position=="absolute"||dims.position=="fixed"){if(dims.top){coord.top=dims.top;}if(dims.left){coord.left=dims.left;}}return coord;}function getOffset(option){var off={h:0,v:0};if(option){var opts=option.split(" ");if(opts.length>0){off.h=Number(opts[0]);}if(opts.length>1){off.v=Number(opts[1]);}}return off;}function getDirections(option){var dir={h:"center",v:"center"};if(option){var opts=option.split(" ");if(opts.length>0){dir=getDirection(opts[0],dir);}if(opts.length>1){dir=getDirection(opts[1],dir);}}return dir;}function getDirection(str,d){switch(str){case"top":d.v="top";break;case"bottom":d.v="bottom";break;case"left":d.h="left";break;case"right":d.h="right";break;default:break;}return d;}function getDims(elem){var offset=$(elem).offset();return{position:$(elem).css("position"),top:Number($(elem).css("top").replace(/[^\d\.]/g,"")),left:Number($(elem).css("left").replace(/[^\d\.]/g,"")),offsetTop:offset.top,offsetLeft:offset.left,width:$(elem).outerWidth(),height:$(elem).outerHeight(),innerWidth:$(elem).innerWidth(),innerHeight:$(elem).innerHeight()};}function getHiddenDims(elems){var dims=null,i=0,offset,elem;while((elem=elems[i++])){var hiddenElems=$(elem).parents().andSelf().filter(":hidden");if(!hiddenElems.length){dims=getDims(elem);}else{var backupStyle=[];hiddenElems.each(function(){var style=$(this).attr("style");style=typeof style=="undefined"?"":style;backupStyle.push(style);$(this).attr("style",style+" display: block !important;");});var left=hiddenElems.eq(0).css("left");hiddenElems.eq(0).css("left",-10000);dims=getDims(elem);hiddenElems.eq(0).css("top",-10000).css("left",left);dims.offsetLeft=getDims(elem).offsetLeft;dims.left=getDims(elem).left;hiddenElems.each(function(){$(this).attr("style",backupStyle.shift());});}}return dims;}$.fn.hiddenPosition.defaults={my:"center",at:"center",of:null,offset:null,using:null,collision:"flip"};$.fn.hiddenPosition.getHiddenDimensions=function(element){return getHiddenDims(element);};$.fn.hiddenPosition.toggleDebug=function(){DEBUG=!DEBUG;};function debug(log,jQueryobj){try{if(DEBUG&&window.console&&window.console.log){window.console.log(log+": "+jQueryobj);}}catch(ex){}}function debugObject(log,jQueryobj){try{if(!jQueryobj){jQueryobj=log;}debug(log,jQueryobj);if(DEBUG&&window.console&&window.console.debug){window.console.debug(jQueryobj);}}catch(ex){}}})(jQuery);